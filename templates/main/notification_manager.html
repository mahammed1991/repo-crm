{% extends 'layouts/main.html' %}

{% load staticfiles %}

{% block title %}
Notification Manager
{% endblock title %}
{% block main_css %}
    <link rel="stylesheet" href="{% static 'css/webapp/vendor/editor.css' %}">
    <link rel="stylesheet" href="{% static 'css/representative/jquery.datetimepicker.css' %}">
{% endblock main_css %}
{% block content %}
<section class="content-region inner-page">
    <div class="container-fluid" style="max-width: 98%;">
        <button id="new-notification" class="btn std-btn sm-btn"
                style="float:right;margin-top: 0.7%;margin-right: 10%;line-height: 90%;">
            <i class="fa fa-bell"></i>
            New Notification
        </button>
        <h2>Notification Manager</h2>
        <div id="notification-box" class="row" style="margin-bottom:1%;display:none;">
            {% csrf_token %}
            <div style="margin-bottom: 1%;margin-left: 1.2%;font-weight: bold;">
                <span id="msg-container"></span>
            </div>
        </div>
        <!-- modal fo picasso-->
      <div id="editor-modal" style="display:none">
        <div class="modal-dialog" style="width:70%;">
          <div class="modal-content" style="width:100%;">
            <div class="modal-header" style="display: inline-block;width:100%;height: 50px;">
              <button type="button" id="close-modal" class="close">&times;</button>
              <h3 class="modal-title" style="font-size:22px;line-height: 18px;">Add New Notification</h3>
            </div>
            <div class="modal-body" style="width:100%;">
                <div class="col-lg-12 nopadding">
                    <textarea id="notification-editor" style="width: 100%;min-height: 100px;max-height: 150px;"></textarea>
                </div>
            </div>
            <div class="modal-footer" style="padding-bottom:25px;">
              <div class="col-md-2">
                   <input type="text" class="start-date form-control" id="start-date" name="start-date" placeholder="Start Date" style="height:40px;">
              </div>
              <div class="col-md-2">
                   <input type="text" class="end-date form-control" id="end-date" name="end-date" placeholder="End Date" style="height:40px;">
              </div>
              <div class="checkbox col-md-2">
                   <label><input type="checkbox" /> Show on form</label>
              </div>
              <button id="publish" class="btn std-btn sm-btn">Publish</button>
              <button id="draft" class="btn std-btn sm-btn">Save as Draft</button>
            </div>
          </div>
        </div>
      </div>
        <div id="notification_wrapper" class="dataTables_wrapper no-footer" style="margin-bottom: 1%;">
            <table id="notifications" class="display" cellspacing="0" width="100%">
                <thead>
                    <tr role="row">
                        <th>Created on</th>
                        <th>Content</th>
                        <th>Countries</th>
                        <th>Teams</th>
                        <th>Status</th>
                        <th>On Form</th>
                        <th>Duration</th>
                        <th>Created By</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="notifications_tbody"></tbody>
            </table>
        </div>
    </div>
</section>
<!-- content-region ends -->
{% endblock content %}

{% block main_js %}
<script src="{% static 'js/reports/moment.min.js' %}"></script>
<script src="{% static 'js/webapp/vendor/editor.js' %}"></script>
<script src="{% static 'js/jquery.datetimepicker.full.js' %}"></script>

<script>
$(document).ready(function(){
    olark('api.box.hide');
    //$("#notification-editor").Editor();
});



// Publish the Notification
$("#publish").on('click', function(e){
    $("#editor-modal").toggle();
});

// Save the Notification as draft
$("#draft").on('click', function(e){
   $("#editor-modal").toggle();
});

// close modal window
$("#close-modal").on('click', function(e){
    $("#editor-modal").toggle();
});

$("#new-notification").on('click', function(e){
    $("#editor-modal").toggle();
    $(".start-date, .end-date").datetimepicker({
          timepicker : false,
          format : 'd-m-Y',
          scrollInput : false,
          minDate : new Date(),
    });

});



</script>

{% endblock main_js %}