{% extends 'layouts/main.html' %}

{% load staticfiles %}

{% block title %}
Inventory
{% endblock title %}
{% block main_css %}
    <link rel="stylesheet" href="{% static 'css/webapp/vendor/jquery.dataTables.min.css' %}">
{% endblock main_css %}

{% block content %}

<div class="wrapper">
<!-- content-region -->
    <section class="content-region inner-page">
        <div class="container-fluid" style="max-width: 95%;">
                <button id="add_emp" class="btn std-btn sm-btn" style="float:right;margin-top: 1%;margin-right: 10%;line-height: 90%;" >+ Add</button>
                <h2>Chromebook Inventory</h2>
                <div id="rlsa_bulk_wrapper" class="dataTables_wrapper no-footer" style="margin-bottom: 1%;">
                    <table id="rlsa_bulk" class="display" cellspacing="0" width="100%">
                        <thead>
                            <tr role="row">
                                <th>Emp Id</th>
                                <th>Name</th>
                                <th>LDAP</th>
                                <th>Alias</th>
                                <th>Project</th>
                                <th>Device type</th>
                                <th>MAC ID</th>
                                <th>Employee Status</th>
                                <th>Device Status</th>
                                <th>Issued on</th>
                                <th>Edit</th>
                            </tr>
					    </thead>
					<tbody id="rlsa_tbody"></tbody>
				</table>
            </div>
        </div>
    </section>
</div>
<div id="preloaderOverlay" style='display:none;'>
  <div class="preloader">
    <img src="{% static 'images/preloader.gif'%}" width="40" height="40" >
  </div>
</div>
{% endblock content %}

{% block main_js %}
<script src="{% static 'js/reports/jquery.min.js' %}"></script>
<script src="{% static 'js/reports/moment.min.js' %}"></script>
<script src="{% static 'js/webapp/vendor/jquery.dataTables.min.js' %}"></script>

<script type="text/javascript">
$(document).ready(function(){
    $('#rlsa_bulk').DataTable( {
		"ajax": {
            "url": "/inventory/chromebook/",
            "dataSrc": function ( json ) {
              json = json['data']
              for ( var i=0; i<json.length; i++ ) {
                    json[i][0] = "1001";
                    json[i][1] = "Sreekanth";
                    json[i][2] = "anubolu@google.com";
                    json[i][3] = "anu@gmail.com";
                    json[i][4] = "Tag"
                    json[i][5] = "Device Brand"
                    json[i][6] = "ac:bc:12:34:56"
                    json[i][7] = "Active"
                    json[i][8] = "Assigned"
                    json[i][9] = localTime(json[i].uploaded_on);
                    json[i][10] = '<a href="#"><span class="glyphicon glyphicon-edit"></span></a>'
              }
              return json;
            }
          },
        columnDefs: [ {
			targets: [ 0 ],
		}, {
			targets: [ 4 ],
			orderData: [ 4, 0 ]
		}, {
		        bSortable: false,
		        targets: [ 1, 6 ]
		}],
		order: [[ 0, "desc" ]],
	} );
});

var localTime = function(unixTimestamp){
    var localTime  = moment.unix(unixTimestamp);
    localTime = moment(localTime).format('DD-MM-YYYY');
    return localTime;
}

</script>
{% endblock main_js %}