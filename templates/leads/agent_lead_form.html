{% extends 'layouts/main.html' %}

{% load staticfiles %}

{% block title %}
	Agency Lead Form
{% endblock title %}

{% block main_css %}
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
{% endblock main_css %}

{% block content %}
<section class="content-region inner-page">
  <div class="container-fluid">
  <h1>Agency Lead Form </h1>
      <div class="lead-form agents-form-selection" id="agency_lead_div">
          <form class="lead-form" id="agency_lead_form" method="POST">
              <!-- ################ Google rep info Starts ######################### -->
              <div class="std-sub-title">Google Rep Info</div>
              <div class="row">
                <div class="col-md-4">
                  <input type="text" class="form-control" id="gref" name="gref" placeholder="Google Rep Name" value='{{ user.get_full_name }}'>
                </div>
                <div class="col-md-4">
                  <input type="email" class="form-control" id="emailref" name="emailref" placeholder="Google Rep Email" value="{{ user.email }}">
                </div>
                <div class="col-md-4">
                  <select class="form-control bgicon" id="team" title="Program Name" name="team">
                    <option value="">Program name</option>
                    {% for team in teams %}
                      <option value='{{team.team_name}}'>{{team.team_name}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <input type="text" class="form-control" name="manager_name" id="manager_name" placeholder="Manager Name" value="{{user.profile.user_manager_name}}">
                </div>
                <div class="col-md-4">
                  <input type="email" class="form-control" name="manager_email" id="manager_email" placeholder="Manager Email" value="{{user.profile.user_manager_email}}">
                </div>
                <div class="col-md-4">
                  <select class="form-control bgicon" onchange="changetime(this);" id="country" title="Program Location" name="country">
                    <option value="0">Market Served</option>
                    {% for loc in locations %}
                      <option value="{{loc.name}}" location_id="{{loc.id}}">{{loc.name}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <!-- ################ Google rep info Ends ######################### -->
            <div class="bg_custom">
              <div class="form-heading">Who will submit the leads?</div>
               <div class="checkbox">
                  <input type="radio" name="cusm_type" id="me" value="me" class="cusm_type" checked="">
                  <span style="padding-right:2.5%;"> Me </span>
                  <input type="radio" name="cusm_type" id="agen" value="agency" class="cusm_type">
                  <span style="padding-right:2.5%;">Agency POC</span>
                </div>

               <div class="form-heading">Will end customers be involved in the implementation process, or will we only be working with the Agency?</div>
                <div class="checkbox web-access">
                  <input type="radio" name="customer_type" id="agency" value="agency" class="customer_type" checked="">
                  <span style="padding-right:2.5%;"> Agency </span>
                  <input type="radio" name="customer_type" id="end_customer" value="end_customer" class="customer_type">
                  <span style="padding-right:2.5%;">End Customer</span>
                </div>

              <div class="form-heading">Will the same task be implemented across different CID or will it be different tasks?</div>
              <div>
                 <input type="radio" name="task_type" value="same_task" id="same_task" class="task_type" checked>
                 <span style="padding-right:2.5%;"> Same task</span>
                  <input type="radio" name="task_type" id="diff_task" value="diff_task" class="task_type">
                  <span style="padding-right:2.5%;">Different tasks </span>
              </div>
          </div>
          <br />
          <!-- ################ Set Aoopintment Starts ######################### -->
          <div class="form-heading">Set Appointment</div>
           <div class="row">
           <div class="col-md-4">
              <select title="Time Zone" class="form-control" id="tzone" name="tzone">
                <option value="">Select Time Zone</option>
              </select>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control" id="tag_contact_person_name" name="tag_contact_person_name" placeholder="Contact Person Name">
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control" id="tag_datepick" process_type='TAG' placeholder="MM/DD/YYYY hh:mm AM/PM" name="tag_datepick" autocomplete='off'>
            </div>
          </div>
          <!-- ################ Set Aoopintment Ends ######################### -->
         
         <!-- ################ Agency Conatct Info Starts ######################### -->
           <div class="std-sub-title">Agency Conatct Info</div>
              <div class="row">
                <div class="col-md-3">
                  <input type="text" class="form-control" id="agency_name" name="agency_name" placeholder="Agency Name">
                </div>
                <div class="col-md-3">
                  <input type="text" class="form-control" id="poc" name="poc" placeholder="Point of Contact">
                </div>
                <div class="col-md-3">
                  <input type="email" class="form-control" id="agency_email" name="agency_email" placeholder="Email">
                </div>
                <div class="col-md-3">
                  <input type="text" class="form-control" id="agency_phone" name="agency_phone" placeholder="Telephone">
                </div>
              </div>
        <!-- ################ Agency Conatct Info Ends ######################### -->

        <!-- ##################### Same Task Functionality Starts #################### --> 
          <div id="same_task_agency">
            <div class="std-sub-title">Same Task</div>
              <div class="row">
                <div class="col-md-4">
                  <select title="Code Type" class="form-control bgicon" name="same_task_ctype" id="same_task_ctype">
                    <option value="">Select Code Type</option>
                    {% for c_type in code_types %}
                      <option value="{{c_type.name}}">{{c_type.name}}</option>
                    {% endfor %}
                    <option value="Google Shopping Setup">Google Shopping Setup</option>
                  </select>
                </div>
              </div>

            <!-- ################### Code Type 1 ############################### -->
            <div class="row" id="same_tag_1" style="display:none;">
              <div class="col-md-4">
                 <input type="text" class="form-control" id="cid1" name="cid1" placeholder="CID">
              </div>
              <div class="col-md-4">
                 <input type="text" class="form-control" id="url1" name="url1" placeholder="URL">
              </div>
              <div class="col-md-3">
                 <input type="text" class="form-control" id="comment1" name="comment1" placeholder="Special Instruction (Optional)">
              </div>
              <div class="col-md-1">
              <span  onclick="addMoreRows(2);" class="add_tag_1"><img src="{% static 'images/plus.png' %}" class="img-responsive plusicon"></span>
              </div>
            </div>
            <!-- ################### Code Type 1 ############################### -->
          <!-- ##################### Same Task Functionality Ends #################### --> 

          <!--- #################Same Shop Functionality ########################## -->
          <!-- ################### Same Shop 1 ############################### -->
              <div class="row" id="same_shop_1" style="display:none;">
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_bid1" name="shop_bid1" placeholder="Recommended Bid">
                  </div>
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_budget1" name="shop_budget1" placeholder="Budget">
                  </div>
                 <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_modifier1" name="shop_modifier1" placeholder="Recommended Mobile Bid Modifier">
                  </div>
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_cid1" name="shop_cid1" placeholder="CID">
                  </div>
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_url1" name="shop_url1" placeholder="URL">
                  </div>
                  <div class="col-md-3">
                     <input type="text" class="form-control" id="shop_comment1" name="shop_comment1" placeholder="Special Instruction (Optional)">
                  </div>
                  <div class="col-md-1">
                  <span onclick="addMoreShopRows(2);" class="add_shop_1"><img src="{% static 'images/plus.png' %}" class="img-responsive plusicon"></span>
                  </div>
                </div>
          <!-- ################### Same Shop 1 ############################### -->
        </div>
        <!--- #################### End Same Shop Functionality ######################## -->

          <!-- ##################### Different Task Functionality #################### --> 
          <div id="different_task_agency" style="display:none;">  
            <div class="std-sub-title">Different Task</div>
            <div class="row fixallit" id="addedRows"></div>

            <!--  Different TAG Lead 1 -->
              <div class="row" id="diff_tag_1">
                        <div class="col-md-4  customwidth custom2">
                           <select title="Code Type" class="form-control bgicon agency_diff" name="diff_ctype1" id="diff_ctype-1">
                              <option value="">Select Code Type</option>
                              {% for c_type in code_types %}
                                <option value="{{c_type.name}}">{{c_type.name}}</option>
                              {% endfor %}
                              <option value="Google Shopping Setup">Google Shopping Setup</option>
                            </select>
                        </div>
              </div> 

          </div>
          <!-- ##################### Different Task Functionality Ends #################### --> 


          <!-- ##################### Start Customer  Same Task Functionality Starts #################### --> 
          <div id="same_task_customer" style="display:none;">
            <div class="std-sub-title">Same Task</div>
              <div class="row">
                <div class="col-md-4">
                  <select title="Code Type" class="form-control bgicon" name="same_task_cust_type" id="same_task_cust_type">
                    <option value="">Select Code Type</option>
                    {% for c_type in code_types %}
                      <option value="{{c_type.name}}">{{c_type.name}}</option>
                    {% endfor %}
                    <option value="Google Shopping Setup">Google Shopping Setup</option>
                  </select>
                </div>
              </div>

            <!-- ################### Code Type 1 ############################### -->
            <div class="row" id="same_cust_tag_1" style="display:none;">
              <div class="col-md-4">
                 <input type="text" class="form-control" id="cid1" name="cid1" placeholder="CID">
              </div>
              <div class="col-md-4">
                 <input type="text" class="form-control" id="url1" name="url1" placeholder="URL">
              </div>
              <div class="col-md-3">
                 <input type="text" class="form-control" id="comment1" name="comment1" placeholder="Special Instruction (Optional)">
              </div>
              <div class="col-md-1">
              <span  onclick="addMoreCustomerRows(2);" class="add_tag_1"><img src="{% static 'images/plus.png' %}" class="img-responsive plusicon"></span>
              </div>
            </div>
            <!-- ################### Code Type 1 ############################### -->
          <!-- ##################### Customer Same Task Functionality Ends #################### --> 

          <!--- ################# Same Shop Sunctionality Starts ########################## -->
          <!-- ################### Same Shop 1 ############################### -->
              <div class="row" id="same_cust_shop_1" style="display:none;">
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_bid1" name="shop_bid1" placeholder="Recommended Bid">
                  </div>
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_budget1" name="shop_budget1" placeholder="Budget">
                  </div>
                 <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_modifier1" name="shop_modifier1" placeholder="Recommended Mobile Bid Modifier">
                  </div>
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_cid1" name="shop_cid1" placeholder="CID">
                  </div>
                  <div class="col-md-4">
                     <input type="text" class="form-control" id="shop_url1" name="shop_url1" placeholder="URL">
                  </div>
                  <div class="col-md-3">
                     <input type="text" class="form-control" id="shop_comment1" name="shop_comment1" placeholder="Special Instruction (Optional)">
                  </div>
                  <div class="col-md-1">
                  <span onclick="addMoreCustomerShopRows(2);" class="add_shop_1"><img src="{% static 'images/plus.png' %}" class="img-responsive plusicon"></span>
                  </div>
                </div>
          <!-- ################### Same Shop 1 ############################### -->
        </div>
        <!--- #################### End Shop Functionality ######################## -->

          <!-- ##################### Different Task Functionality Starts #################### --> 
          <div id="different_task_customer" style="display:none;">  
            <div class="std-sub-title">Different Task</div>
            <div class="row fixallit" id="addedRows"></div>

            <!--  Different TAG Lead 1 -->
              <div class="row" id="diff_cust_tag_1">
                        <div class="col-md-4  customwidth custom2">
                           <select title="Code Type" class="form-control bgicon customer_diff" name="diff_cust_type1" id="diff_cust_type-1">
                              <option value="">Select Code Type</option>
                              {% for c_type in code_types %}
                                <option value="{{c_type.name}}">{{c_type.name}}</option>
                              {% endfor %}
                              <option value="Google Shopping Setup">Google Shopping Setup</option>
                            </select>
                        </div>
              </div> 

          </div>
          <!-- ##################### Customer Different Task Functionality Ends #################### --> 

          <div class="btns text-center" id="submit_buttons">
              <div class="btn-group">
                  <button class="btn std-btn">Submit</button>
                  <button class="btn std-btn grayed" onclick="resetBtn(this);" id="formReset">Reset</button>
              </div>
          </div>
        </form>
      </div>  
  </div>
</section>
{% endblock content %}

{% block main_js %}
{% include 'leads/timezone.html' %}
<script src="{% static 'js/jquery-ui.js' %}"></script>
<script src="{% static 'js/agent_lead_form.js' %}"></script>
<script type="text/javascript">

  // Task Type 
$(".task_type").click(function(){
    hideAllFields();
    $('.tagFields, .shopFields').remove();
     taskId = $(this).attr('id');

    if($(".customer_type:checked").val() == 'agency'){
        if(taskId == 'same_task'){
          $("#same_task_agency").show();
          $("#different_task_agency").hide();
        }else if(taskId == 'diff_task'){
          $("#different_task_agency").show();
          $("#same_task_agency").hide();
        }
        hideCustomerFields();
    }else if($(".customer_type:checked").val() == 'end_customer'){
        if(taskId == 'same_task'){
          $("#same_task_customer").show();
          $("#different_task_customer").hide();
        }else if(taskId == 'diff_task'){
          $("#different_task_customer").show();
          $("#same_task_customer").hide();
        }
        hideAgencyFields();
    }
});

$(".customer_type").click(function(){
    hideAllFields();
    $('.tagFields, .shopFields').remove();
    customerId = $(this).attr('id');
    if($(".task_type:checked").val() == 'same_task'){
        if(customerId == 'agency'){
          $("#same_task_agency").show();
          $("#different_task_agency").hide();
        }else if(customerId == 'end_customer'){
          $("#different_task_agency").show();
          $("#same_task_agency").hide();
        }
        hideCustomerFields();
    }else if($(".task_type:checked").val() == 'diff_task'){
        if(customerId == 'agency'){
          $("#same_task_customer").show();
          $("#different_task_customer").hide();
        }else if(customerId == 'end_customer'){
          $("#different_task_customer").show();
          $("#same_task_customer").hide();
        }
        hideAgencyFields();
    }
});

function hideCustomerFields(){
  $("#same_task_customer").hide();
  $("#different_task_customer").hide();
  $("#diff_ctype-1").val('');
  $("#same_task_ctype").val('');
  $("#same_tag_1").hide();
}

function hideAgencyFields(){
  $("#same_task_agency").hide();
  $("#different_task_agency").hide();
  $("#diff_cust_type-1").val('');
  $("#same_task_cust_type").val('');
  $("#same_cust_tag_1").hide();
}


function hideAllFields(){
  // Agency Fields
  $(".tag").remove();
  $(".shop").remove();
  $(".add_tag_1, .add_shop_1").hide();
}
// Same Task and select the Code type
$("#same_task_ctype").change(function(){
    $(".tag").remove();
    $(".shop").remove();
    $(".add_tag_1, .add_shop_1").show();
    selectedCtype = $(this).val();
    if(selectedCtype == 'Google Shopping Setup'){
        $("#same_tag_1").hide();
        $("#same_shop_1").show();
    }else if(selectedCtype == '0' || selectedCtype == ''){
        $("#same_tag_1").hide();
        $("#same_shop_1").hide();
    }else{
        $("#same_tag_1").show();
        $("#same_shop_1").hide();
    }
});

//if code type is null then hide fields

// addMoreRows Click functionality
function addMoreRows(indx){
    createAgencySameTag(indx);
    prevIndx = parseInt(indx) - 1;
    $(".add_tag_" + prevIndx).hide();
    $(".delete_tag_" + prevIndx).hide();
}

// deleteRows Click functionality
function deleteRows(indx){
    var elemId = 'same_tag_' + indx;
    $("#"+elemId).remove()
    prevIndx = parseInt(indx) - 1;
    $(".add_tag_" + prevIndx).show();
    $(".delete_tag_" + prevIndx).show();
}


// addMoreRows Click functionality
function addMoreShopRows(indx){
    createAgencySameShop(indx);
    prevIndx = parseInt(indx) - 1;
    $(".add_shop_" + prevIndx).hide();
    $(".delete_shop_" + prevIndx).hide();
}

// deleteRows Click functionality
function deleteShopRows(indx){
   var  elemId = 'same_shop_' + indx;
    $("#" + elemId).remove();
    prevIndx = parseInt(indx) - 1;
    $(".add_shop_" + prevIndx).show();
    $(".delete_shop_" + prevIndx).show();
}

$(document).on('change', '.agency_diff', function() {
    selectedCtype = $(this).val();
    if(selectedCtype == '' || selectedCtype == '0'){
      $('.fields').hide();
    }else if(selectedCtype == 'Google Shopping Setup'){
      selectedindex = $(this).attr('id').split('-')[1]
      $("#shopFields" + selectedindex).remove();
      $("#tagFields" + selectedindex).remove();
      createShopFields(parseInt(selectedindex));
    }else{
      selectedindex = $(this).attr('id').split('-')[1]
      $("#shopFields" + selectedindex).remove();
      $("#tagFields" + selectedindex).remove();
      createTagFields(parseInt(selectedindex));
    }
 });


// addMoreRows Click functionality
function addMoreTagRows(indx){
  createCodeTypeForTag(indx);
  prevIndx = parseInt(indx) - 1;
  $(".add_tag_" + prevIndx).hide();
  $(".delete_tag_" + prevIndx).hide();
}

function deleteDiffTagRows(indx){
  $('#diff_tag_'+indx).remove();
   prevIndx = parseInt(indx) - 1;
  $(".add_tag_" + prevIndx).show();
  $(".delete_tag_" + prevIndx).show();

}

function createAgencySameTag(indx){
var next_indx = indx + 1;
  ele = '<div class="row tag" id="same_tag_' + indx + '" > '+
          '<div class="col-md-4"><input type="text" class="form-control" id="cid' + indx + '"  name="cid' + indx + '" placeholder="CID"></div>' +
          '<div class="col-md-4"><input type="text" class="form-control" id="url' + indx + '"  name="url' + indx + '" placeholder="URL"></div>' +
          '<div class="col-md-3"><input type="text" class="form-control" id="comment' + indx + '" name="comment' + indx + '" placeholder="Special Instruction (Optional)"></div>' +
          '<div class="col-md-1"><span  onclick="addMoreRows('+ next_indx +');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteRows('+ indx + ');" class="delete_tag_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></span></div>' +
        '</div>'

  $("#same_task_agency").append(ele);
}

function createAgencySameShop(indx){
var next_indx = indx + 1;
  ele =   '<div class="row shop" id="same_shop_' + indx + '">'+
           '<div class="col-md-4"><input type="text" class="form-control" id="bid' + indx + '" name="bid' + indx + '" placeholder="Recommended Bid"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="budget' + indx + '" name="budget' + indx + '" placeholder="Budget"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="modifier' + indx + '" name="modifier' + indx + '" placeholder="Recommended Mobile Bid Modifier"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="cid' + indx + '" name="cid' + indx + '" placeholder="CID"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="url' + indx + '" name="url' + indx + '" placeholder="URL"></div>'+
            '<div class="col-md-3"><input type="text" class="form-control" id="shop_comment' + indx + '" name="shop_comment' + indx + '" placeholder="Special Instruction (Optional)"></div>'+
            '<div class="col-md-1"><span onclick="addMoreShopRows(' + next_indx + ');" class="add_shop_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteShopRows(' + indx + ');" class="delete_shop_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></span></div>'+
            '</div>'

  $("#same_task_agency").append(ele);
}


function createTagFields(indx){

  nextInd = indx + 1; 

  ele =  '<div id="tagFields' + indx + '" class="tagFields">'+
         '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="cid' + indx + '" name="cid' + indx + '" placeholder="CID"></div>'+
        '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="url' + indx + '" name="url' + indx + '" placeholder="URL"></div>'+
        '<div class="col-md-3 customwidth"><input type="text" class="form-control" id="comment' + indx + '" name="comment' + indx + '" placeholder="Special Instruction (Optional)"></div>'

        if(indx == 1){
            tail = '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span></div>'+
                  '</div>'
        }
        else{
            tail =  '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteDiffTagRows(' + indx + ');" class="delete_tag_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></div>'+
                  '</div>'
        }

    $("#diff_tag_"+indx).append(ele+tail);
}

function createCodeTypeForTag(indx){
  ele  = '<div class="row" id="diff_tag_' + indx + '">'+
                      '<div class="col-md-4  customwidth custom2">'+
                         '<select title="Code Type" class="form-control bgicon agency_diff" name="diff_ctype' + indx + '" id="diff_ctype-' + indx + '">'+
                            '<option value="">Select Code Type</option>'+
                            '{% for c_type in code_types %}'+
                              '<option value="{{c_type.name}}">{{c_type.name}}</option>'+
                            '{% endfor %}'+
                            '<option value="Google Shopping Setup">Google Shopping Setup</option>'+
                          '</select>'+
                      '</div>'+
            '</div>'
  $('#different_task_agency').append(ele);
}

function createShopFields(indx){

  var nextInd = indx + 1;

  ele =  '<div id="shopFields' + indx + '" class="shopFields">'+
         '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="cid' + indx + '" name="cid' + indx + '" placeholder="CID"></div>'+
        '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="url' + indx + '" name="url' + indx + '" placeholder="URL"></div>'+
        '<div class="col-md-4 customwidth"><input type="text" class="form-control" id="comment' + indx + '" name="comment' + indx + '" placeholder="Special Instruction (Optional)"></div>'

  shop =  '<div class="col-md-4 customwidth></div>'+
         '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="bid' + indx + '" name="bid' + indx + '" placeholder="Recommended Bid"></div>'+
        '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="budget' + indx + '" name="budget' + indx + '" placeholder="BUDGET"></div>'+
        '<div class="col-md-3 customwidth"><input type="text" class="form-control" id="modifier' + indx + '" name="modifier' + indx + '" placeholder="Recommended Mobile Bid Modifier"></div>'

        if(indx == 1){
              tail = '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span></div>'+
                    '</div>'
        }else{
            tail =  '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteDiffTagRows(' + indx + ');" class="delete_tag_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></div>'+
                  '</div>'
        }

      $("#diff_tag_"+indx).append(ele + shop + tail);

}


/* ############################################ End Customer ################################## */

// Same Task and select the Code type
$("#same_task_cust_type").change(function(){
    $(".tag").remove();
    $(".shop").remove();
    $(".add_tag_1, .add_shop_1").show()
    selectedCtype = $(this).val();
    if(selectedCtype == 'Google Shopping Setup'){
        $("#same_cust_tag_1").hide();
        $("#same_cust_shop_1").show();
    }else if(selectedCtype == '0' || selectedCtype == ''){
        $("#same_cust_tag_1").hide();
        $("#same_cust_shop_1").hide();
    }else{
        $("#same_cust_tag_1").show();
        $("#same_cust_shop_1").hide();
    }
});


// addMoreCustomerRows Click functionality
function addMoreCustomerRows(indx){
    createCustomerSameTag(indx);
    prevIndx = parseInt(indx) - 1;
    $(".add_tag_" + prevIndx).hide();
    $(".delete_tag_" + prevIndx).hide();
}

// deleteRows Click functionality
function deleteCustomerRows(indx){
    var elemId = 'same_cust_tag_' + indx;
    $("#"+elemId).remove()
    prevIndx = parseInt(indx) - 1;
    $(".add_tag_" + prevIndx).show();
    $(".delete_tag_" + prevIndx).show();
}


// addMoreRows Click functionality
function addMoreCustomerShopRows(indx){
    createCustomerSameShop(indx);
    prevIndx = parseInt(indx) - 1;
    $(".add_shop_" + prevIndx).hide();
    $(".delete_shop_" + prevIndx).hide();
}

// deleteRows Click functionality
function deleteCustomerShopRows(indx){
   var  elemId = 'same_cust_shop_' + indx;
    $("#" + elemId).remove();
    prevIndx = parseInt(indx) - 1;
    $(".add_shop_" + prevIndx).show();
    $(".delete_shop_" + prevIndx).show();
}

$(document).on('change', '.customer_diff', function() {
    selectedCtype = $(this).val();
    if(selectedCtype == '' || selectedCtype == '0'){
      $('.fields').hide();
    }else if(selectedCtype == 'Google Shopping Setup'){
      selectedindex = $(this).attr('id').split('-')[1]
      $("#shopFields" + selectedindex).remove();
      $("#tagFields" + selectedindex).remove();
      createCustomerShopFields(parseInt(selectedindex));
    }else{
      selectedindex = $(this).attr('id').split('-')[1]
      $("#shopFields" + selectedindex).remove();
      $("#tagFields" + selectedindex).remove();
      createCustomerTagFields(parseInt(selectedindex));
    }
 });


// addMoreRows Click functionality
function addMoreCustomerTagRows(indx){
  createCustomerCodeTypeForTag(indx);
  prevIndx = parseInt(indx) - 1;
  $(".add_tag_" + prevIndx).hide();
  $(".delete_tag_" + prevIndx).hide();
}

function deleteCustomerDiffTagRows(indx){
  $('#diff_cust_tag_'+indx).remove();
   prevIndx = parseInt(indx) - 1;
  $(".add_tag_" + prevIndx).show();
  $(".delete_tag_" + prevIndx).show();

}

function createCustomerSameTag(indx){
var next_indx = indx + 1;
  ele = '<div class="row tag" id="same_cust_tag_' + indx + '" > '+
          '<div class="col-md-4"><input type="text" class="form-control" id="cid' + indx + '"  name="cid' + indx + '" placeholder="CID"></div>' +
          '<div class="col-md-4"><input type="text" class="form-control" id="url' + indx + '"  name="url' + indx + '" placeholder="URL"></div>' +
          '<div class="col-md-3"><input type="text" class="form-control" id="comment' + indx + '" name="comment' + indx + '" placeholder="Special Instruction (Optional)"></div>' +
          '<div class="col-md-1"><span  onclick="addMoreCustomerRows('+ next_indx +');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteCustomerRows('+ indx + ');" class="delete_tag_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></span></div>' +
        '</div>'

  $("#same_task_customer").append(ele);
}

function createCustomerSameShop(indx){
var next_indx = indx + 1;
  ele =   '<div class="row shop" id="same_cust_shop_' + indx + '">'+
           '<div class="col-md-4"><input type="text" class="form-control" id="bid' + indx + '" name="bid' + indx + '" placeholder="Recommended Bid"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="budget' + indx + '" name="budget' + indx + '" placeholder="Budget"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="modifier' + indx + '" name="modifier' + indx + '" placeholder="Recommended Mobile Bid Modifier"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="cid' + indx + '" name="cid' + indx + '" placeholder="CID"></div>'+
            '<div class="col-md-4"><input type="text" class="form-control" id="url' + indx + '" name="url' + indx + '" placeholder="URL"></div>'+
            '<div class="col-md-3"><input type="text" class="form-control" id="shop_comment' + indx + '" name="shop_comment' + indx + '" placeholder="Special Instruction (Optional)"></div>'+
            '<div class="col-md-1"><span onclick="addMoreCustomerShopRows(' + next_indx + ');" class="add_shop_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteCustomerShopRows(' + indx + ');" class="delete_shop_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></span></div>'+
            '</div>'

  $("#same_task_customer").append(ele);
}


function createCustomerTagFields(indx){

  nextInd = indx + 1; 

  ele =  '<div id="tagFields' + indx + '" class="tagFields">'+
         '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="cid' + indx + '" name="cid' + indx + '" placeholder="CID"></div>'+
        '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="url' + indx + '" name="url' + indx + '" placeholder="URL"></div>'+
        '<div class="col-md-3 customwidth"><input type="text" class="form-control" id="comment' + indx + '" name="comment' + indx + '" placeholder="Special Instruction (Optional)"></div>'

        if(indx == 1){
            tail = '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreCustomerTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span></div>'+
                  '</div>'
        }
        else{
            tail =  '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreCustomerTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteCustomerDiffTagRows(' + indx + ');" class="delete_tag_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></div>'+
                  '</div>'
        }

    $("#diff_cust_tag_"+indx).append(ele+tail);
}

function createCustomerCodeTypeForTag(indx){
  ele  = '<div class="row" id="diff_cust_tag_' + indx + '">'+
                      '<div class="col-md-4  customwidth custom2">'+
                         '<select title="Code Type" class="form-control bgicon customer_diff" name="diff_cust_type' + indx + '" id="diff_cust_type-' + indx + '">'+
                            '<option value="">Select Code Type</option>'+
                            '{% for c_type in code_types %}'+
                              '<option value="{{c_type.name}}">{{c_type.name}}</option>'+
                            '{% endfor %}'+
                            '<option value="Google Shopping Setup">Google Shopping Setup</option>'+
                          '</select>'+
                      '</div>'+
            '</div>'
  $('#different_task_customer').append(ele);
}

function createCustomerShopFields(indx){

  var nextInd = indx + 1;

  ele =  '<div id="shopFields' + indx + '" class="shopFields">'+
         '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="cid' + indx + '" name="cid' + indx + '" placeholder="CID"></div>'+
        '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="url' + indx + '" name="url' + indx + '" placeholder="URL"></div>'+
        '<div class="col-md-4 customwidth"><input type="text" class="form-control" id="comment' + indx + '" name="comment' + indx + '" placeholder="Special Instruction (Optional)"></div>'

  shop =  '<div class="col-md-4 customwidth></div>'+
         '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="bid' + indx + '" name="bid' + indx + '" placeholder="Recommended Bid"></div>'+
        '<div class="col-md-2 customwidth"><input type="text" class="form-control" id="budget' + indx + '" name="budget' + indx + '" placeholder="BUDGET"></div>'+
        '<div class="col-md-3 customwidth"><input type="text" class="form-control" id="modifier' + indx + '" name="modifier' + indx + '" placeholder="Recommended Mobile Bid Modifier"></div>'

        if(indx == 1){
              tail = '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreCustomerTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span></div>'+
                    '</div>'
        }else{
            tail =  '<div class="col-md-1 allcenter customwidthplus"><span onclick="addMoreCustomerTagRows('+nextInd+');" class="add_tag_' + indx + '"><img src="{% static "images/plus.png" %}" class="img-responsive plusicon"></span><span  onclick="deleteCustomerDiffTagRows(' + indx + ');" class="delete_tag_' + indx + '"><img src="{% static "images/minus.png" %}" class="img-responsive plusicon"></div>'+
                  '</div>'
        }

      $("#diff_cust_tag_"+indx).append(ele + shop + tail);

}

</script>
{% endblock main_js %}