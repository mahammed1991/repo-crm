{% extends 'layouts/main.html' %}

{% load staticfiles %}
{% load static %}
{% load question_list_tags %}

{% block title %}
Regalix Google Portal
{% endblock title %}

{% block main_css %}

{% endblock main_css %}

{% block content %}
<!-- content-region -->
<section class="content-region">
    <div class="container-fluid">
      <h1>Leads Summary</h1>
      <div class="row">
        <div class="col-xs-6 col-sm-4 col-md-2 placeholder">
          <div class="circle_green">{{lead_status_dict.in_active}}</div>
          <div class="sum-lbl">Wins</div>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-2 placeholder">
          <div class="circle_red">{{lead_status_dict.in_queue}}</div>
          <div class="sum-lbl">In Queue</div>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-2 placeholder">
          <div class="circle_blue">{{lead_status_dict.attempting_contact}}</div>
          <div class="sum-lbl">Attempting Contact</div>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-2 placeholder">
          <div class="circle_yellow">{{lead_status_dict.in_progress}}</div>
          <div class="sum-lbl">In Progress</span> </div>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-2 placeholder">
          <div class="circle">{{lead_status_dict.implemented }}</div>
          <div class="sum-lbl">Inactive</div>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-2 placeholder">
          <div class="circle_black">{{lead_status_dict.total_leads}}</div>
          <div class="sum-lbl">Total</div>
        </div>
      </div>
      <h1 class="lead_status">Leads Status</h1>
      <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-5">
            <ul class="pagination">
              <li><a class="tag" href="#" id='all'>All</a></li>
              <li><a class="page" href="#" id='Inactive'>Inactive</a></li>
              <li><a class="page" href="#" id='InQueue'>In Queue</a></li>
              <li><a class="page" href="#" id='AttemptingContact'>Attempting Contact</a></li>
              <li><a class="page" href="#" id='InProgress' >In Progress </a></li>
              <li><a class="page" href="#" id='Implemented'>Implemented</a></li>
            </ul>
          </div>
          <div class="col-xs-6 col-sm-6 col-md-4">
            <div class="form-group has-feedback">
              <input type="text" class="form-control input-sm" id="inputValidation" placeholder="Search" onkeyup="filter(this, 'Leads')"/>
              <span class="search-icon"><i class="fa fa-search" /></i></span> </div>
          </div>
          <div class="col-xs-6 col-sm-6 col-md-3">            
              <ul class="filer-area">
                <li class="lbl">Sort by: </li>
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Recent <i class="fa fa-angle-down"></i></a>
                  <ul class="dropdown-menu light" role="menu">
                    <li><a href="#">CID</a></li>
                    <li><a href="#">Code Type</a></li>
                    <li><a href="#">Status</a></li>
                  </ul>
                  </li>
              </ul>
            </div>
          </div>
      </span>
      <div class="row">
      <div class="table-responsive col-xs-12 col-sm-12 col-md-12">
        <table class="table status-table" id='Leads'>
          <thead>
            <tr  class="table_bg">
              <th class="hidden-xs hidden-sm nthchild">No.</th>
              <th class="hidden-xs hidden-sm nthchild1">Advertiser</th>
              <th class="nthchild2">CID <i class="fa fa-filter"></i></th>
              <th class="hidden-xs hidden-sm nthchild3">Code Type <i class="fa fa-filter"></i></th>
              <th class="hidden-xs hidden-sm nthchild3">Google Rep</th>
              <th class="hidden-xs hidden-sm nthchild3">Regalix Rep</th>
              <th class="hidden-xs hidden-sm nthchild3">Date Created</th>
              <th class="hidden-xs hidden-sm nthchild3">Date of Installation</th>
              <th class="hidden-xs hidden-sm nthchild8">Google Comments</th>
              <th class="hidden-xs hidden-sm nthchild8">Regalix Comments</th>
              <th class="nthchild3">Status <i class="fa fa-filter"></i></th>
              <th class="nthchild11">Action</th>
            </tr>
                {% for l in leads %}

                      {% if l.lead_status == 'Implemented' %}
                      <tr class='implemented searchable'>
                        <td class="hidden-xs hidden-sm"><span class="green_bor">{{forloop.counter}}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'In Active' %}
                      <tr class='inactive searchable'>
                        <td class="hidden-xs hidden-sm"><span class="left_bor">{{forloop.counter}}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'In Progress' %}
                      <tr class='inprogress searchable'>
                        <td class="hidden-xs hidden-sm"><span class="yellow_bor">{{forloop.counter}}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'Attempting Contact' %}
                      <tr class='attemptingcontact searchable'>
                        <td class="hidden-xs hidden-sm"><span class="blue_bor">{{forloop.counter}}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'In Queue' %}
                      <tr class='inqueue searchable'>
                        <td class="hidden-xs hidden-sm"><span class="red_bor">{{forloop.counter}}</span></td>
                      {% endif %}
                      <td class="hidden-xs hidden-sm">{{ l.company }}</td>
                      <td>{{ l.customer_id }}</td>
                      <td class="hidden-xs hidden-sm">{{ l.type_1 }}</td>
                      <td class="hidden-xs hidden-sm">{{ l.google_rep_name }}</td>
                      <td class="hidden-xs hidden-sm">{{ l.lead_owner_name }}</td>
                      <td class="hidden-xs hidden-sm">{{ l.created_date |date:"m/d/Y" }}</td>
                      <td class="hidden-xs hidden-sm">{{ l.date_of_installation |date:"m/d/Y" }}</td>
                      {% if l.google_comment  %}
                        <td class="hidden-xs hidden-sm comments-container"><p>{{ l.google_comment | truncatechars:100 }}</p>
                            <p class="comments-full"><img class="left-arrow" src="{%static 'images/comments-left-arrow.png' %}"> {{ l.google_comment}}</p> </td>
                      {% else %}
                        <td class="hidden-xs hidden-sm comments-container"><p></p>
                        </td>
                      {% endif %}
                      {% if l.regalix_comment  %}
                          <td class="hidden-xs hidden-sm comments-container"><p>{{ l.regalix_comment | truncatechars:100 }}</p>
                            <p class="comments-full"><img class="left-arrow" src="{%static 'images/comments-left-arrow.png' %}"> {{ l.regalix_comment}}</p> </td>
                      {% else %}
                          <td class="hidden-xs hidden-sm comments-container"><p></p>
                            </td>
                      {% endif %}
                     
                      {% if l.lead_status == 'Implemented' %}
                        <td><span style="color:#109d59; font-family:robotobold;">{{ l.lead_status }}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'In Active'%}
                        <td><span style="color:#acacac; font-family:robotobold;" >{{ l.lead_status }}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'In Progress' %}
                        <td><span style="color:#f5b400; font-family:robotobold;" >{{ l.lead_status }}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'Attempting Contact' %}
                        <td><span style="color:#4385f5; font-family:robotobold;" >{{ l.lead_status }}</span></td>
                      {% endif %}
                      {% if l.lead_status == 'In Queue' %}
                        <td><span style="color:#dc4437; font-family:robotobold;" >{{ l.lead_status }}</span></td>
                      {% endif %}
                      <td ><a href="#" title="Ping Status" class="action-item"><i class="fa fa-comments"></i></a> <a href="{% url 'main.views.create_feedback' l.id %}" title="Write Feedback" class="action-item fb"><i class="fa fa-pencil-square"></i></a></td>
                      
                    </tr>
                    
                {% endfor %}
               
        </thead>
      </table>
        <div class="span4"></div>
        <div class="span4"><img src="{% static 'images/pre_loading.png' %}" alt=" " class="center-block"/></div>
        <div class="span4"></div>
    </div>
  </div>
</section>
<!-- content-region ends --> 
{% endblock content %}

{% block main_js %}
   <script>
       $(document).ready(function(){
         $('[data-toggle="tooltip"]').tooltip({
          'placement': 'right'
      });
    })
</script>

<script src="{% static 'js/lead_summary.js' %}"></script>

 
  
{% endblock main_js %}
